# 아고라 실시간 전광판 (Star Messages) 운영 가이드

수학 아고라 상단에서 실시간으로 흐르는 '스타 메시지' 전광판의 운영 규칙과 기술적 메커니즘을 정리한 문서입니다.

---

## 1. 노출 우선순위 알고리즘 (Smart Queue)

전광판은 단순히 시간순으로 메시지를 보여주지 않으며, 사용자 경험을 최적화하기 위해 다음과 같은 가중치를 적용합니다.

| 우선순위 | 구분 | 로직 설명 |
| :--- | :--- | :--- |
| **1순위** | **내 메시지 (My Message)** | 본인이 작성한 글은 서버 순서와 관계없이 리스트 최상단에 배치되어 즉시 노출됩니다. |
| **2순위** | **핫 메시지 (Hot Content)** | 공감(🚀) 수치가 높은 메시지들이 우선적으로 순환 리스트에 포함됩니다. |
| **3순위** | **최신 메시지 (Newest)** | 나머지 슬롯은 방금 등록된 메시지들로 채워집니다. |

---

## 2. 운영 및 필터링 규칙 (Anti-Abuse)

커뮤니티의 건전성을 유지하고 리소스를 효율적으로 관리하기 위한 규칙입니다.

### 2.1 도배 방지 (Diversity Filtering)
*   **1인 1노출**: 동일한 사용자가 여러 개의 메시지를 등록하더라도, 전광판에는 **가장 최근에 작성한 메시지 1개**만 노출됩니다.
*   이는 특정 사용자가 전광판을 독점하는 것을 방지하기 위함입니다.

### 2.2 유효 기간 (TTL: Time To Live)
*   **3시간 자동 소멸**: 작성된 지 **3시간**이 지난 메시지는 전광판 큐에서 자동으로 제외됩니다.
*   공부 세션에 맞는 실시간성을 유지하며, 오래된 데이터가 전광판을 차지하지 않도록 관리합니다.

### 2.3 리소스 제한
*   **최대 풀(Pool) 사이즈**: 전광판은 한 번에 최대 **40개~50개**의 고가치 메시지만 유지합니다.

---

## 3. 사용자 인터랙션 가이드

### 3.1 공감(Boost) 시스템
*   **중복 클릭 제한**: 한 사용자는 동일한 메시지에 대해 **단 1회**만 공감(부스트)을 줄 수 있습니다.
*   **클릭 쓰로틀링**: 짧은 시간 내에 발생하는 반복 클릭은 시스템 보호를 위해 0.5초 간격으로 제한됩니다.

### 3.2 시각적 식별
*   **[나] 뱃지**: 본인이 쓴 글에는 황금색 '나' 뱃지가 붙어 다른 익명 사용자들과 즉시 구분됩니다.
*   **하이라이트 효과**: 공감을 많이 받거나 특정 키워드가 포함된 글은 반짝이는(Sparkle) 효과가 적용됩니다.

---

## 4. 관리자 참고 사항 (Admin Tips)

*   **실시간성**: 전광판은 약 5초 주기로 서버와 동기화됩니다.
*   **닉네임 노출**: 사용자의 닉네임(displayName) 노출을 기본으로 하되, 비로그인 혹은 닉네임 미설정 시 '탐험가'로 표시됩니다.
*   **데이터 정제**: 부적절한 언어 필터링은 백엔드 API 혹은 Firebase 보안 규칙을 통해 보완될 수 있습니다.
